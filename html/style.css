/*
  STYLE.CSS for OR-TRACER

  This stylesheet implements a "chiseled graphite glass" design for the
  provided HTML structure. It focuses on a modern, high-contrast, and
  readable layout.

  ORGANIZATION:
  1.  ROOT & FONT: Imports the 'Inter' font and defines root variables for
      the color scheme and layout properties.
  2.  GENERAL BODY & LAYOUT: Sets up the main flexbox layout with a fixed-width
      sidebar on the left and a main content area on the right.
  3.  PANEL STYLING: Defines the base "glass" style for all major panels
      (e.g., `.sidebar > div`, `.steps`) using backdrop-filter for a blurry
      glass effect and box-shadows for a "chiseled" or inset appearance.
  4.  SIDEBAR: Styles the specific panels in the sidebar (`.activeGoals`,
      `.sigma`, etc.) and uses `::before` pseudo-elements to add titles since
      they are not in the HTML.
  5.  MAIN CONTENT & STEPS: Styles the execution graph. It uses pseudo-elements
      on `.StepNode` and `.substeps` to create the visual tree-like connecting
      lines.
  6.  CORE COMPONENT STYLING:
      -   `Con` & `Var` Blocks: This is a key feature. These elements are styled
          to look like they fit together. This is achieved by having them in a
          flex container and only applying border-radius to the very first and
          very last element in a sequence, creating a continuous, rounded block.
      -   `Atom`, `Goal`, `Rule`: These are styled as distinct informational units
          with clear typography and spacing.
      -   `SubstItem`: Styled as a key-value pair for readability.
  7.  UTILITY & MISC: Styles for smaller elements like separators, indices,
      and messages (`.dead-end-message`).
*/

/* 1. ROOT & FONT */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
  --font-family: 'Inter', sans-serif;
  --bg-color: #f0f2f5;
  --panel-bg: rgba(255, 255, 255, 0.6);
  --panel-border-color: rgba(0, 0, 0, 0.1);
  --shadow-color: rgba(0, 0, 0, 0.05);
  --text-color: #1c1e21;
  --text-color-light: #606770;
  --accent-color: #0866ff;
  --var-bg: #e7f3ff;
  --con-bg: #e9ecef;
  --rule-bg: #dbeafe;
  --error-color: #dc3545;
  --panel-padding: 1.5rem;
  --border-radius: 12px;
  --block-radius: 8px;
}

/* 2. GENERAL BODY & LAYOUT */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-family);
  background-color: var(--bg-color);
  color: var(--text-color);
  line-height: 1.6;
  font-size: 14px;
  padding: 20px;
}

.Env {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.sidebar {
  width: 380px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 20px;
  position: sticky;
  top: 20px;
}

.main {
  flex-grow: 1;
  min-width: 0;
}

/* 3. PANEL STYLING */
.sidebar > div,
.steps {
  background-color: var(--panel-bg);
  border-radius: var(--border-radius);
  border: 1px solid var(--panel-border-color);
  box-shadow: 0 4px 12px var(--shadow-color), inset 0 0 0 1px rgba(255,255,255,0.5);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  padding: var(--panel-padding);
  position: relative;
}

.sidebar > div::before {
  content: attr(class);
  display: block;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--panel-border-color);
  text-transform: capitalize;
  color: var(--accent-color);
}

.activeGoals::before { content: 'Active Goals'; }
.suspendedGoals::before { content: 'Suspended Goals'; }
.failedGoals::before { content: 'Failed Goals'; }
.sigma::before { content: 'Substitution'; }

/* 4. SIDEBAR SPECIFICS */
.List {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.Subst {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 400px;
  overflow-y: auto;
  padding-right: 10px;
}

.SubstItem {
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: 'Courier New', Courier, monospace;
}

/* 5. MAIN CONTENT & STEPS */
.steps {
  padding: var(--panel-padding);
}

.StepsGraph {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.StepNode {
  background-color: rgba(255, 255, 255, 0.5);
  border: 1px solid var(--panel-border-color);
  border-radius: var(--border-radius);
  overflow: hidden;
}

.substeps {
  padding: 15px;
  position: relative;
  background-color: rgba(0, 0, 0, 0.02);
}

.subgoals {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 15px;
  padding-left: 25px;
  position: relative;
}

.subgoals::before {
  content: '';
  position: absolute;
  left: 10px;
  top: 0;
  bottom: 0;
  width: 1px;
  background-color: #d0d0d0;
}

.subgoals > .StepNode {
  position: relative;
}

.subgoals > .StepNode::before {
  content: '';
  position: absolute;
  left: -15px;
  top: 28px;
  width: 15px;
  height: 1px;
  background-color: #d0d0d0;
}

.separator {
  height: 1px;
  background-color: var(--panel-border-color);
  margin: 0;
}

.dead-end-message {
  color: var(--error-color);
  font-weight: 500;
  padding: 10px;
  text-align: center;
  background-color: rgba(220, 53, 69, 0.05);
  border-radius: var(--block-radius);
}

/* 6. CORE COMPONENT STYLING */
.goal {
  padding: 15px;
  background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.4));
}

.Goal {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.freshGoalIndex {
  font-weight: 600;
  color: var(--accent-color);
  background-color: rgba(8, 102, 255, 0.1);
  border-radius: 50%;
  width: 28px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.atom {
  flex-grow: 1;
}

.Atom {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px;
}

.AtomName {
  font-weight: 600;
  color: var(--text-color);
  margin-right: 6px;
}

.Con, .Var {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  padding: 4px 8px;
  gap: 4px;
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.Var {
  background-color: var(--var-bg);
  color: #004085;
  font-weight: 500;
}

.Con {
  background-color: var(--con-bg);
  color: var(--text-color-light);
}

.Atom > .Con, .Atom > .Var {
  border-radius: var(--block-radius);
}

.Con .Con, .Con .Var,
.SubstItem > .Con, .SubstItem > .Var,
.Goal .Con, .Goal .Var {
  border-radius: 0;
}

.Con > :first-child,
.SubstItem > :nth-child(3) > :first-child {
  border-top-left-radius: var(--block-radius);
  border-bottom-left-radius: var(--block-radius);
}

.Con > :last-child,
.SubstItem > :nth-child(3) > :last-child {
  border-top-right-radius: var(--block-radius);
  border-bottom-right-radius: var(--block-radius);
}

.ConName {
  font-weight: 500;
  color: #383d41;
}

.VarFreshIndex {
  font-size: 0.8em;
  opacity: 0.7;
  margin-left: 2px;
  display: inline-block;
  transform: translateY(2px);
}

.rule {
  margin-bottom: 10px;
}

.RuleName {
  display: inline-block;
  background-color: var(--rule-bg);
  color: var(--accent-color);
  padding: 3px 10px;
  border-radius: 15px;
  font-size: 0.9em;
  font-weight: 500;
}

.opts {
  display: flex;
  gap: 5px;
  margin-left: auto;
}

.GoalOpt {
  background-color: #fff0c2;
  color: #664d03;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.8em;
  font-weight: 500;
}
